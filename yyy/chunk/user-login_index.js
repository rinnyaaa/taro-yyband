(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"253":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(0),r=n(280),i=n(90),a=n.n(i),c=n(4),s=n.n(c),u=n(91),p=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var l=function(e){function AtForm(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtForm),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtForm.__proto__||Object.getPrototypeOf(AtForm)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtForm,u["a"]),p(AtForm,[{"key":"onSubmit","value":function onSubmit(){var e;(e=this.props).onSubmit.apply(e,arguments)}},{"key":"onReset","value":function onReset(){var e;(e=this.props).onReset.apply(e,arguments)}},{"key":"render","value":function render(){var e=this.props,t=e.customStyle,n=e.className,i=e.reportSubmit,a=s()("at-form",n);return o.j.createElement(r.a,{"className":a,"style":t,"onSubmit":this.onSubmit.bind(this),"reportSubmit":i,"onReset":this.onReset.bind(this)},this.props.children)}}]),AtForm}();l.defaultProps={"customStyle":"","className":"","reportSubmit":!1,"onSubmit":function onSubmit(){},"onReset":function onReset(){}},l.propTypes={"customStyle":a.a.oneOfType([a.a.object,a.a.string]),"className":a.a.oneOfType([a.a.array,a.a.string]),"reportSubmit":a.a.bool,"onSubmit":a.a.func,"onReset":a.a.func}},"270":function(e,t,n){e.exports=n.p+"static/images/logo.jpg"},"271":function(e,t,n){},"289":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var o=n(0),r=n(294),i=n(2),a=n(11),c=n(284),s=n(253),u=n(296),p=n(295),l=n(270),f=n.n(l),h=n(94),d=n(92),m=(n(271),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),y=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0};var b=function(e){function Login(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Login);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Login.__proto__||Object.getPrototypeOf(Login)).apply(this,arguments));return e.state={"email":"","password":""},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,i["a"].Component),m(Login,[{"key":"handleChangeEmail","value":function handleChangeEmail(e){this.setState({"email":e})}},{"key":"handleChangePwd","value":function handleChangePwd(e){this.setState({"password":e})}},{"key":"onSubmit","value":function onSubmit(e){console.log(e)}},{"key":"onReset","value":function onReset(e){console.log(e)}},{"key":"toast","value":function toast(){console.log("1234"),Object(r.c)({"title":"功能开发中","icon":"none"})}},{"key":"login","value":function login(){var e=this.state,t=e.email,n=e.password,o={"email":t,"password":n};t?n?Object(h.a)({"url":d.d,"method":"POST","showToast":!0,"payload":o}).then(function(e){e&&(i.a.eventCenter.trigger("login_success"),Object(r.c)({"title":"登陆成功","icon":"none"}).then(function(){i.a.navigateBack({})}))}):Object(r.c)({"title":"请输入密码","icon":"none"}).then():Object(r.c)({"title":"请输入邮箱","icon":"none"}).then(console.log("没输邮箱"))}},{"key":"render","value":function render(){return o.j.createElement(a.a,{"className":"container"},o.j.createElement(a.a,{"className":"login-form"},o.j.createElement(a.a,{"style":"text-align:center"},o.j.createElement(c.a,{"style":"width:200px;height:200px","src":f.a})),o.j.createElement(s.a,{"onSubmit":this.onSubmit.bind(this),"onReset":this.onReset.bind(this)},o.j.createElement(u.a,{"name":"usernmae","title":"用户名","type":"text","placeholder":"邮箱","value":this.state.email,"onChange":this.handleChangeEmail.bind(this)}),o.j.createElement(u.a,{"name":"pwd","title":"密码","type":"password","placeholder":"密码需要由字母数字组成","value":this.state.password,"onChange":this.handleChangePwd.bind(this)})),o.j.createElement(a.a,{"style":"margin-top:20px"},o.j.createElement(p.a,{"type":"primary","onClick":this.login.bind(this)},"登录")),o.j.createElement(a.a,{"className":"login-redirect"},o.j.createElement(a.a,{"onClick":this.toast},"注册账号"),o.j.createElement(a.a,{"onClick":this.toast},"忘记密码"))))}},{"key":"componentDidMount","value":function componentDidMount(){y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidMount",this)&&y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidShow",this)&&y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidHide",this)&&y(Login.prototype.__proto__||Object.getPrototypeOf(Login.prototype),"componentDidHide",this).call(this)}}]),Login}()},"92":function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return c});var o="http://www.zard1991.cn:7001",r=o+"/api/user/access/login",i=o+"/api/account",a=o+"/api/record",c=o+"/api/type"},"94":function(e,t,n){"use strict";var o=n(278),r=n(279),i=n(294),a=n(2),c=n(92),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var i=t[o](r),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}var u;function updateStorage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.all([Object(o.d)({"key":"token","data":e.token||""})])}t.a=(u=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n,u,p,l,f,h,d,m,y,b=this;return regeneratorRuntime.wrap(function _callee2$(g){for(;;)switch(g.prev=g.next){case 0:return t=e.url,n=e.payload,u=e.method,p=void 0===u?"GET":u,l=e.showToast,f=void 0===l||l,h=e.autoLogin,d=void 0===h||h,g.next=3,v="token",Object(o.b)({"key":v}).then(function(e){return e.data}).catch(function(){return""});case 3:return m=g.sent,y=m?{"Authorization":"Bearer "+m}:{},"POST"===p&&(y["content-type"]="application/json"),g.abrupt("return",Object(r.a)({"url":t,"method":p,"data":n,"header":y}).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var n,o,r;return regeneratorRuntime.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.data,o=n.code,r=n.data,200===o){i.next=6;break}if(401!==o){i.next=5;break}return i.next=5,updateStorage({});case 5:return i.abrupt("return",Promise.reject(e.data));case 6:if(t!==c.d){i.next=9;break}return i.next=9,updateStorage(r);case 9:return i.abrupt("return",r);case 10:case"end":return i.stop()}},_callee,b)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){var t=401===e.code?"登录失效":"请求异常";return t=e.error||t,f&&Object(i.c)({"title":e&&e.errorMsg||t,"icon":"none"}),401===e.code&&d&&Object(i.c)({"title":"未登录","icon":"none","success":function success(){a.a.navigateTo({"url":"/pages/user-login/index"})}}),Promise.reject(s({"message":t},e))}));case 7:case"end":return g.stop()}var v},_callee2,this)})),function(e){return u.apply(this,arguments)})}}]);